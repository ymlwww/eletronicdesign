
# 《植物大战僵尸》设计文档 #

# 1.场景设定 #
>**白天带池塘**

# 2.游戏事件 #
    开始游戏（放弃选关卡）
	选植物（图鉴）
	放植物
	捡太阳
	植物要动
	特殊植物效果（一次性的，睡莲）
	僵尸走过来了
	僵尸要动
	僵尸吃植物
	特殊僵尸
	植物被吃没了（或者吃少了）
	僵尸被打没了（或者掉胳膊掉脑袋掉帽子）
	僵尸到了终点线，推车清僵尸
	僵尸吃掉了你的脑子
	进度条
	一大波僵尸的来临
	胜利
	铲子
	……

# 3.游戏逻辑 #
	
游戏状态：
①	选择植物

②	游戏开始

③	结束游戏

鼠标状态：
1. 选植物 2. 放植物 3. 铲植物 4. 观看（放阳光）
2. 具体：选植物，点太阳，放植物，放回植物到图鉴，看图鉴，选铲子
TODO：状态转化自动机


分区：①植物栏 ②主菜单 ③游戏界面——6层（4层地+2层水）


游戏架构：


①	输入
②	输出（VGA，music）
③	游戏核心：M（游戏内部处理模块） V（根据游戏核心运算的结果输出到VGA及其他模块） C（处理鼠标点击，发出信号）


#4.游戏详细描述#

	植物分类：
	 > 攻击性：豌豆射手，寒冰射手，双重射手，食人花
	 > 一次性：窝瓜，辣椒，水草，土豆地雷
	 > 特殊攻击：地刺，地刺王
	 > 防御性：坚果墙（生命值高一点）
	 > 承载性：睡莲
	 > 向日葵，三射手

	1.存在ROM里的东西：

	植物信息：

	属性：
    动画
（行为，功能）
	生命值
	恢复时间
	对于攻击性植物，有两个参数：①攻击力 ②攻击间隔
	对一次性植物：攻击范围
	特殊攻击：攻击力，攻击范围
	向日葵：产生时间间隔

	场景：
	有一个表格存储所有的方格的植物（包括它种下去的时间等等），植物的信息（冷却时间，功能等）都是存起来的。场景把所有的格子都扫描一遍，进行需要做的操作（发射子弹，产生阳光等）。

	僵尸信息：
动画
（行为、功能）
生命值
不同生命值阈值以及对应的图片
被击倒后存留的时间以及图片

	子弹信息：
类型（包括移动速度，功能，存着）

2.游戏进行的过程中需要做的事
在种下植物的时候，更新二维数组的状态。
每个CLK来，做下面的事情：

更新子弹的位置
更新僵尸的位置
实现僵尸行为
时刻记录最前面的子弹的位置。
时刻记录最前面的僵尸的位置。
每次都判断一下是否相遇。如果打到了，就把这个子弹从那个列表里删掉。如果僵尸死了，就把这个僵尸从那个列表里删掉。
扫描二维数组，看植物的行为
实现植物的行为
更新植物的图片
更新植物的生命值
看植物是不是需要发出子弹
更新僵尸的生命值